%-------------------
% Useful packages

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{amsmath,amssymb,amsthm}
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{float}

\usepackage{url}
\usepackage{hyperref}
\usepackage{Sweave}

%-------------------
% Useful macro
\newcommand{\Rcpp}{{\tt Rcpp}} %
\newcommand{\rtkpp}{{\tt rtkpp}} %
\newcommand{\rtkore}{{\tt rtkore}} %
\newcommand{\stkpp}{{\tt STK++}} %
\newcommand{\Cpp}{{\tt C++}}

\newcommand{\Esp}[1]{\mathbb{E}\left[#1\right]}
\newcommand{\Var}[1]{\mathrm{Var}\left[#1\right]}
\newcommand{\E}[1]{\mathbb{E}\left[#1\right]}
\newcommand{\V}[1]{\mathrm{Var}\left[#1\right]}
\newcommand{\Loi}[1]{\mathcal{L}\left(#1\right)}

%----- Sets : integers, reals, complexes -----
\newcommand{\Nn}{\mathbb{N}} \newcommand{\N}{\mathbb{N}}
\newcommand{\Zz}{\mathbb{Z}} \newcommand{\Z}{\mathbb{Z}}
\newcommand{\Qq}{\mathbb{Q}} \newcommand{\Q}{\mathbb{Q}}
\newcommand{\Rr}{\mathbb{R}} \newcommand{\R}{\mathbb{R}}
\newcommand{\Cc}{\mathbb{C}}

%-------------------
% Multiple lines in a tabular
\newcommand{\vcell}[2][c]{%
\begin{tabular}[#1]{@{}l@{}}#2\end{tabular}}

%-------------------
% Nice notes
\usepackage{mdframed} % Add easy frames to paragraphs
\usepackage{xcolor}
\usepackage{xparse} % Add support for \NewDocumentEnvironment
\definecolor{graylight}{cmyk}{.30,0,0,.67} % define color using xcolor syntax
\definecolor{redlight}{rgb}{1,.2,.2} % define color using xcolor syntax

\newmdenv[ % Define mdframe settings and store as leftrule
  linecolor=graylight,
  topline=false,
  bottomline=false,
  rightline=false,
  skipabove=\topsep,
  skipbelow=\topsep
]{leftrule}

\newmdenv[ % Define mdframe settings and store as leftrule
  linecolor=redlight,
  topline=false,
  bottomline=false,
  rightline=false,
  skipabove=\topsep,
  skipbelow=\topsep
]{redleftrule}

\NewDocumentEnvironment{note}{O{\textbf{Note:}}} % Define example environment
{\begin{leftrule}\noindent\textcolor{graylight}{#1}\par}
{\end{leftrule}}

\NewDocumentEnvironment{warning}{O{\textbf{Warning:}}} % Define warning environment
% environment
{\begin{redleftrule}\noindent\textcolor{redlight}{#1}\par}
{\end{redleftrule}}

%-------------------
% nice listing
\usepackage{listings}
\usepackage{caption}

\lstdefinestyle{customcpp}{
  language=C++,
  belowcaptionskip=1\baselineskip,
  breaklines=true,
  basicstyle=\ttfamily\scriptsize,
  frame=single,
  xleftmargin=\parindent,
  showstringspaces=false,
  keywordstyle=\color{red},
  commentstyle=\ttfamily\scriptsize\color{green!40!black},
  identifierstyle=\color{blue},
  stringstyle=\color{orange},
}
\lstdefinestyle{inlinecpp}{
  language=C++,
  belowcaptionskip=1\baselineskip,
  basicstyle=\ttfamily,
  frame=single,
  xleftmargin=\parindent,
  showstringspaces=false,
  keywordstyle=\color{red},
  commentstyle=\ttfamily\color{green!40!black},
  identifierstyle=\color{blue},
  stringstyle=\color{orange},
}


\DeclareCaptionFormat{listing}
{
  \colorbox[cmyk]{0.43, 0.35, 0.35, 0.01}
  { \parbox{\textwidth}{\hspace{15pt}#1#2#3}}
}
\captionsetup[lstlisting]{ format=listing, %labelfont=white, textfont=white
                         , singlelinecheck=false, margin=-0.2cm
                         , font={bf,footnotesize} }

\newcommand{\includelstlisting}[1]{\lstinputlisting[style=customcpp]{#1}}
\newcommand{\code}[1]{\lstinline[style=inlinecpp]@#1@}
\newcommand{\ttcode}[1]{{\ttfamily\scriptsize #1}}
% end nice lstlisting
%---------------------

